{% extends "admin/base.html" %}
{% load static i18n %}

{# =========================
   Title / Branding
   ========================= #}
{% block title %}لوحة الإدارة | {{ site_title|default:_('Django site admin') }}{% endblock %}

{% block branding %}
  <h1 id="site-name" style="margin:0;">
    <a href="{% url 'admin:index' %}" style="display:inline-flex;align-items:center;gap:10px;text-decoration:none;">
      <span style="font-weight:900;">لوحة إدارة نظام الاختبارات</span>
    </a>
  </h1>
{% endblock %}

{% block nav-global %}{% endblock %}

{# =========================
   Extra Head (RTL + Cairo + UI + Scroll Fix)
   ========================= #}
{% block extrahead %}
  {{ block.super }}

  <!-- Cairo -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800;900&display=swap" rel="stylesheet">

  <style>
    :root{
      --ff:"Cairo",system-ui,-apple-system,"Segoe UI",Tahoma,Arial,sans-serif;
      --shadow: 0 10px 26px rgba(2,44,34,.08);
      --radius: 16px;
    }

    /* =========================
       ✅ Scroll Fix (الأهم)
       ========================= */
    html, body{
      height: auto !important;
      min-height: 100% !important;
      overflow: auto !important;
      font-family: var(--ff) !important;
    }

    #container, #content, #content-main, #content-related{
      height: auto !important;
      min-height: 0 !important;
      overflow: visible !important;
    }

    /* صفحات changelist أحياناً تنحبس داخل wrapper */
    .change-list #content,
    .change-form #content{
      overflow: visible !important;
    }

    /* =========================
       RTL
       ========================= */
    body{
      direction: rtl;
      text-align: right;
    }
    #container, #content, #content-main, #content-related{
      text-align: right;
    }
    .breadcrumbs{
      direction: rtl;
      text-align: right;
    }
    .breadcrumbs a{ font-weight:900; }

    /* =========================
       Header
       ========================= */
    #header{
      background: linear-gradient(135deg, #0ea5e9, #22c55e);
      color:#fff;
      border-bottom: 0;
    }
    #header a:link, #header a:visited{
      color:#fff !important;
      font-weight:900;
    }

    /* =========================
       Toolbar
       ========================= */
    #toolbar{
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: visible; /* ✅ لا تقفل السكرول */
    }

    /* =========================
       Modules / Cards
       ⚠️ لا تستخدم overflow:hidden على .module لأنه يحبس التمرير
       ========================= */
    .module,
    .dashboard #content-main .module{
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: visible; /* ✅ */
    }

    /* =========================
       Tables (القص داخل الجدول فقط)
       ========================= */
    #changelist{
      overflow: visible;
    }
    #changelist table{
      border-radius: 14px;
      overflow: hidden; /* ✅ هنا فقط */
    }
    #changelist table thead th,
    #changelist table tbody td{
      text-align: right;
    }

    /* =========================
       Buttons
       ========================= */
    a.button,
    input[type=submit],
    .submit-row input,
    .object-tools a{
      border-radius: 12px !important;
      font-weight: 900 !important;
    }

    /* =========================
       Messages
       ========================= */
    ul.messagelist li{
      border-radius: 14px;
      font-weight: 900;
    }

    /* =========================
       Small RTL touches
       ========================= */
    .aligned label{
      float: right;
      padding-left: 0;
      padding-right: 10px;
    }
    .aligned .form-row{
      text-align: right;
    }
  </style>
{% endblock %}
