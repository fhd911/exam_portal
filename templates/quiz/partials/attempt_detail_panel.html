<div class="panel">
  <div class="hd">
    <div class="t">محاولة #{{ attempt.id }}</div>
    <div class="s">{{ attempt.participant.full_name }} — {{ attempt.domain_label }}</div>
  </div>

  <div class="grid">
    <div class="it"><div class="k">الحالة</div><div class="v">{% if attempt.is_finished %}منتهي{% else %}جاري{% endif %}</div></div>
    <div class="it"><div class="k">الدرجة</div><div class="v">{{ attempt.score|default:0 }}</div></div>
    <div class="it"><div class="k">السبب</div><div class="v">{{ attempt.finished_reason|default:"—" }}</div></div>
    <div class="it"><div class="k">IP</div><div class="v">{{ attempt.started_ip|default:"—" }}</div></div>
  </div>

  <div class="tblWrap">
    <table class="tbl">
      <thead><tr><th>#</th><th>السؤال</th><th>الإجابة</th></tr></thead>
      <tbody>
        {% for x in answers %}
          <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ x.question.text }}</td>
            <td>{% if x.selected_choice %}{{ x.selected_choice.text }}{% else %}—{% endif %}</td>
          </tr>
        {% empty %}
          <tr><td colspan="3" class="empty">لا توجد إجابات.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<style>
  .panel{background:#fff;border:1px solid rgba(231,238,246,.95);border-radius:18px;padding:12px}
  .hd .t{font-weight:1200}
  .hd .s{margin-top:4px;color:var(--mut);font-weight:1000}
  .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin-top:10px}
  @media (max-width:900px){.grid{grid-template-columns:repeat(2,1fr)}}
  .it{border:1px solid rgba(231,238,246,.95);border-radius:14px;padding:10px;background:#fafcff}
  .k{font-size:12px;color:var(--mut);font-weight:1100}
  .v{margin-top:6px;font-weight:1200}
  .tblWrap{margin-top:10px;border-radius:14px;border:1px solid rgba(231,238,246,.95);overflow:auto}
  .tbl{width:100%;border-collapse:separate;border-spacing:0;min-width:700px}
  .tbl thead th{background:#f8fafc;border-bottom:1px solid rgba(15,23,42,.08);padding:10px;font-size:12px;font-weight:1200}
  .tbl tbody td{border-bottom:1px solid rgba(15,23,42,.06);padding:10px;font-weight:1000;font-size:12.8px}
  .empty{text-align:center;color:var(--mut);font-weight:1100}
</style>
