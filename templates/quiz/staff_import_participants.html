{# quiz/templates/quiz/staff_import_participants.html #}
{% extends "quiz/base.html" %}
{% load static %}

{% block title %}استيراد المرشحين{% endblock %}

{% block content %}
<div class="wrap" style="max-width:980px;margin:0 auto;">

  <!-- رأس -->
  <div style="display:flex;align-items:flex-start;justify-content:space-between;gap:12px;flex-wrap:wrap;margin-bottom:12px;">
    <div>
      <h1 style="margin:0;font-size:16px;font-weight:1000;letter-spacing:.2px;color:#0f172a;">
        استيراد المرشحين
      </h1>
      <div style="margin-top:6px;color:#607185;line-height:1.8;font-size:12px;">
        الأمدة المطلوبة — Excel (.xlsx): <b>national_id</b>, <b>full_name</b>, <b>phone_last4</b>, <b>domain</b>
      </div>
    </div>

    <div style="display:flex;gap:8px;flex-wrap:wrap;align-items:center;">
      <a class="btn"
         href="{% url 'quiz:staff_manage' %}"
         style="text-decoration:none;white-space:nowrap;background:rgba(245,246,255,.9);border:1px solid rgba(99,102,241,.25);color:#0f172a;font-weight:1000;">
        رجوع
      </a>
    </div>
  </div>

  <!-- Card -->
  <div class="glass" style="
    background:rgba(255,255,255,.86);
    border:1px solid rgba(231,238,246,.95);
    border-radius:18px;
    padding:14px;
    box-shadow:0 10px 30px rgba(0,0,0,.06);
  ">

    <form method="post" enctype="multipart/form-data">
      {% csrf_token %}

      <!-- Grid -->
      <div style="display:grid;grid-template-columns:1fr 1.2fr;gap:10px;align-items:end;">

        <!-- اسم الشيت -->
        <div>
          <label style="display:block;font-size:11px;color:#607185;margin-bottom:6px;">
            اسم الشيت (اختياري)
          </label>

          <input name="sheet"
                 value="participants"
                 placeholder="مثال: participants"
                 style="width:100%;padding:10px 12px;border-radius:12px;border:1px solid rgba(148,163,184,.35);font-size:12px;outline:none;">
          <div style="margin-top:6px;color:#6b7a89;font-size:11px;line-height:1.7;">
            إذا تركته فارغًا سيتم استخدام أول ورقة في الملف تلقائيًا.
          </div>
        </div>

        <!-- اختيار الملف -->
        <div>
          <label style="display:block;font-size:11px;color:#607185;margin-bottom:6px;">
            ملف Excel (.xlsx)
          </label>

          <div style="display:flex;gap:8px;align-items:center;">
            <input type="file"
                   name="file"
                   accept=".xlsx"
                   required
                   style="flex:1;padding:8px 10px;border-radius:12px;border:1px solid rgba(148,163,184,.35);font-size:12px;outline:none;background:#fff;">
          </div>

          <div style="margin-top:6px;color:#6b7a89;font-size:11px;line-height:1.7;">
            تأكد أن الصف الأول يحتوي أسماء الأعمدة.
          </div>
        </div>

      </div>

      <!-- خيارات -->
      <div style="margin-top:12px;display:grid;grid-template-columns:1fr 1fr;gap:10px;">
        <label style="
          display:flex;gap:8px;align-items:flex-start;
          padding:10px 12px;border-radius:14px;
          border:1px solid rgba(148,163,184,.28);
          background:rgba(250,251,255,.75);
          font-size:12px;color:#0f172a;line-height:1.8;
        ">
          <input type="checkbox" name="replace_all" value="1" style="margin-top:3px;">
          <span>
            استبدال التسجيلات (حذف الكل ثم إدخال الجديد)
            <div style="color:#6b7a89;font-size:11px;">(اختياري) استخدمه فقط عند الرغبة بتحديث شامل.</div>
          </span>
        </label>

        <label style="
          display:flex;gap:8px;align-items:flex-start;
          padding:10px 12px;border-radius:14px;
          border:1px solid rgba(148,163,184,.28);
          background:rgba(250,251,255,.75);
          font-size:12px;color:#0f172a;line-height:1.8;
        ">
          <input type="checkbox" name="reset_locks" value="1" style="margin-top:3px;">
          <span>
            إعادة تعيين القفل (للمستوردين فقط)
            <div style="color:#6b7a89;font-size:11px;">(اختياري) يزيل locked_domain/has_taken_exam عن نفس المرشحين في الملف.</div>
          </span>
        </label>
      </div>

      <!-- زر الاستيراد -->
      <div style="margin-top:14px;display:flex;justify-content:flex-start;gap:10px;flex-wrap:wrap;">
        <button class="btn" type="submit"
                style="white-space:nowrap;background:rgba(240,255,247,.9);border:1px solid rgba(16,185,129,.25);color:#0f172a;font-weight:1000;">
          استيراد
        </button>
      </div>

      <!-- تنسيق الأعمدة -->
      <div style="margin-top:14px;border-top:1px solid rgba(180,190,205,.25);padding-top:12px;">
        <div style="font-weight:1000;font-size:13px;color:#0f172a;margin-bottom:8px;">
          تنسيق الأعمدة
        </div>

        <ul style="margin:0;padding-right:18px;color:#607185;font-size:12px;line-height:2;">
          <li><b>national_id</b> : رقم الهوية</li>
          <li><b>full_name</b> : الاسم الكامل</li>
          <li><b>phone_last4</b> : آخر 4 أرقام من الجوال</li>
          <li><b>domain</b> : يقبل <b>deputy / counselor / activity</b> أو عربي (وكيل/مرشد/نشاط)</li>
          <li style="color:#6b7a89;font-size:11px;line-height:1.9;margin-top:6px;">
            (اختياري) <b>is_allowed</b> أو <b>allowed</b> لتحديد السماح (Yes/No أو 1/0).
          </li>
        </ul>
      </div>

    </form>
  </div>

</div>
{% endblock %}
