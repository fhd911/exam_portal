{# quiz/templates/quiz/staff_import_questions.html #}
{% extends "quiz/base.html" %}
{% load static %}

{% block title %}استيراد الأسئلة{% endblock %}

{% block content %}
<div class="wrap" style="max-width:980px;margin:0 auto;">

  <!-- رأس الصفحة -->
  <div style="display:flex;align-items:flex-start;justify-content:space-between;gap:12px;flex-wrap:wrap;margin-bottom:12px;">
    <div>
      <h1 style="margin:0;font-size:16px;font-weight:1000;letter-spacing:.2px;color:#0f172a;">
        استيراد الأسئلة
      </h1>
      <div style="margin-top:6px;color:#607185;line-height:1.8;font-size:12px;">
        ملف واحد (.xlsx) — يحتوي أسئلة الاختبار.  
        الأعمدة المطلوبة: <b>text</b>, <b>a</b>, <b>b</b>, <b>correct</b> (والبقية اختيارية).
      </div>
    </div>

    <div style="display:flex;gap:8px;flex-wrap:wrap;align-items:center;">
      <a class="btn"
         href="{% url 'quiz:staff_manage' %}"
         style="text-decoration:none;white-space:nowrap;background:rgba(245,246,255,.9);border:1px solid rgba(99,102,241,.25);color:#0f172a;font-weight:1000;">
        رجوع
      </a>
    </div>
  </div>

  <!-- Card -->
  <div class="glass" style="
    background:rgba(255,255,255,.86);
    border:1px solid rgba(231,238,246,.95);
    border-radius:18px;
    padding:14px;
    box-shadow:0 10px 30px rgba(0,0,0,.06);
  ">

    <form method="post" enctype="multipart/form-data">
      {% csrf_token %}

      <!-- اختيار الملف -->
      <div style="display:grid;grid-template-columns:1fr 1.2fr;gap:10px;align-items:end;">
        <div>
          <label style="display:block;font-size:11px;color:#607185;margin-bottom:6px;">
            اسم الاختبار داخل الملف (اختياري)
          </label>
          <input name="quiz_title"
                 placeholder="إذا يوجد عمود quiz_title سيُستخدم تلقائيًا"
                 style="width:100%;padding:10px 12px;border-radius:12px;border:1px solid rgba(148,163,184,.35);font-size:12px;outline:none;">
          <div style="margin-top:6px;color:#6b7a89;font-size:11px;line-height:1.7;">
            إذا لم يوجد عمود <b>quiz_title</b> في الملف، سيتم استخدام “الاختبار” تلقائيًا (حسب كود الـ views).
          </div>
        </div>

        <div>
          <label style="display:block;font-size:11px;color:#607185;margin-bottom:6px;">
            ملف Excel (.xlsx)
          </label>
          <input type="file"
                 name="file"
                 accept=".xlsx"
                 required
                 style="width:100%;padding:8px 10px;border-radius:12px;border:1px solid rgba(148,163,184,.35);font-size:12px;outline:none;background:#fff;">
          <div style="margin-top:6px;color:#6b7a89;font-size:11px;line-height:1.7;">
            يجب أن يحتوي الصف الأول على أسماء الأعمدة.
          </div>
        </div>
      </div>

      <!-- خيارات (اختياري) -->
      <div style="margin-top:12px;display:flex;gap:10px;flex-wrap:wrap;align-items:center;">
        <label style="
          display:flex;gap:8px;align-items:flex-start;
          padding:10px 12px;border-radius:14px;
          border:1px solid rgba(148,163,184,.28);
          background:rgba(250,251,255,.75);
          font-size:12px;color:#0f172a;line-height:1.8;
          opacity:.6;
        " title="غير مفعّل حالياً في الكود (جاهز للمستقبل)">
          <input type="checkbox" disabled style="margin-top:3px;">
          <span>
            معاينة فقط (بدون حفظ)
            <div style="color:#6b7a89;font-size:11px;">(غير مفعّل حالياً)</div>
          </span>
        </label>

        <button class="btn" type="submit"
                style="white-space:nowrap;background:rgba(240,255,247,.9);border:1px solid rgba(16,185,129,.25);color:#0f172a;font-weight:1000;">
          تنفيذ الاستيراد
        </button>
      </div>

      <!-- تنسيق الأعمدة -->
      <div style="margin-top:14px;border-top:1px solid rgba(180,190,205,.25);padding-top:12px;">
        <div style="font-weight:1000;font-size:13px;color:#0f172a;margin-bottom:8px;">
          الأعمدة المطلوبة داخل كل شيت
        </div>

        <div style="
          border:1px solid rgba(148,163,184,.28);
          border-radius:16px;
          padding:12px;
          background:rgba(250,251,255,.85);
        ">
          <div style="color:#607185;font-size:12px;line-height:2;">
            <b>order</b> (اختياري) — ترتيب السؤال  
            <br>
            <b>text</b> (إلزامي) — نص السؤال  
            <br>
            <b>a</b>, <b>b</b> (إلزامي) — خيار 1 وخيار 2  
            <br>
            <b>c</b>, <b>d</b> (اختياري) — خيار 3 وخيار 4  
            <br>
            <b>correct</b> (إلزامي) — الصحيح: <b>A</b>/<b>B</b>/<b>C</b>/<b>D</b> أو رقم <b>1-4</b>
          </div>

          <div style="margin-top:10px;color:#6b7a89;font-size:11px;line-height:1.8;">
            ملاحظة: الكود الحالي يقوم بحذف خيارات السؤال وإعادة إنشائها عند الاستيراد لتوحيد البيانات.
          </div>
        </div>
      </div>

    </form>
  </div>
</div>
{% endblock %}
